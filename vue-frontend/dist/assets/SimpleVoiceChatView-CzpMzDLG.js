import{c as z,d as F,L as G,r as H,a as O,w as R,l as W,s as n,v as e,k as o,b as f,p as a,e as l,u as s,_ as X,F as Z,P as q,M as w,G as _,x as b,N as g,W as D,X as E,V as J,Z as K,O as k,j as i}from"./index-CSZ9edpw.js";import{f as h,_ as m,B as C,g as S,U as Q}from"./index-8hsMokCs.js";import{_ as Y}from"./Progress.vue_vue_type_script_setup_true_lang-CRlg0xyF.js";import{_ as ss,T as es,a as ts,H as as,G as ls,S as is}from"./AlertDescription.vue_vue_type_script_setup_true_lang-CXEuvUxf.js";import{u as ns,V as rs}from"./voice-BtWHYMRq.js";import{a as os}from"./index-hijg72sg.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=z("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]),cs={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},us={class:"container mx-auto p-4 max-w-2xl"},fs={class:"space-y-6"},gs={class:"flex justify-center pt-8"},_s={class:"relative"},hs={key:0,class:"absolute inset-0 rounded-full border-4 border-blue-300 animate-ping"},ms={key:1,class:"absolute -bottom-2 -right-2"},ps={class:"text-center space-y-3"},vs={key:0,class:"w-full max-w-xs mx-auto"},xs={class:"flex justify-center"},ys={key:0},ws={key:1,class:"flex items-center gap-6"},bs={key:0,class:"flex justify-center"},ks={key:1,class:"space-y-3"},Cs={class:"space-y-3 max-h-64 overflow-y-auto"},Ss={class:"flex items-start gap-2 max-w-[80%]"},Vs={class:"text-sm"},js={class:"text-xs opacity-70 mt-1"},Ms={class:"text-center space-y-4"},$s={class:"flex items-center justify-center gap-2 mb-3"},As={class:"flex items-center justify-center gap-6 text-xs text-gray-500"},Ps={class:"flex items-center gap-2"},Bs={class:"grid grid-cols-2 gap-3 mt-4 text-xs text-gray-600 dark:text-gray-400"},Ts={class:"flex items-center gap-2"},Us={class:"flex items-center gap-2"},Is={class:"flex items-center gap-2"},Ls={class:"flex items-center gap-2"},Ws=F({__name:"SimpleVoiceChatView",setup(Ns){const p=ns(),{messages:V,callState:r,isAIPlaying:v,isMuted:x,conversationRounds:j,canStartCall:M,funAudioAvailable:$}=G(p),{checkServiceStatus:A,startCall:P,endCall:B,toggleMute:T,getStatusText:U}=p,u=H(0),y=O(()=>V.value.slice(-6));function I(){switch(r.value){case"idle":return"secondary";case"connecting":return"default";case"connected":return"default";case"listening":return"default";case"speaking":return"default";case"processing":return"default";default:return"secondary"}}async function L(){try{await P()}catch(c){alert(c.message)}}function N(){if(r.value==="processing"){u.value=0;const c=setInterval(()=>{u.value+=10,(u.value>=100||r.value!=="processing")&&(clearInterval(c),u.value=0)},100)}}return R(r,c=>{c==="processing"&&N()}),W(()=>{A()}),(c,t)=>(i(),n("div",cs,[e("div",us,[e("div",fs,[e("div",gs,[e("div",_s,[a(s(h),{class:"w-32 h-32"},{default:l(()=>[e("div",{class:_(["w-full h-full rounded-full flex items-center justify-center transition-all duration-300",s(v)?"bg-blue-500 animate-pulse":"bg-blue-600"])},[a(s(C),{class:"h-16 w-16 text-white"})],2)]),_:1}),s(v)?(i(),n("div",hs)):o("",!0),s(r)==="listening"?(i(),n("div",ms,t[0]||(t[0]=[e("div",{class:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center animate-pulse"},[e("div",{class:"w-2 h-2 bg-white rounded-full"})],-1)]))):o("",!0)])]),e("div",ps,[t[2]||(t[2]=e("h2",{class:"text-2xl font-bold text-gray-800 dark:text-white mb-2"}," AI 语音助手 ",-1)),a(s(X),{variant:I(),class:"text-sm px-3 py-1"},{default:l(()=>[b(g(s(U)()),1)]),_:1},8,["variant"]),s(r)==="processing"?(i(),n("div",vs,[a(Y,{value:u.value,class:"h-2"},null,8,["value"]),t[1]||(t[1]=e("p",{class:"text-xs text-gray-500 mt-1"},"正在处理语音...",-1))])):o("",!0)]),e("div",xs,[s(r)==="idle"?(i(),n("div",ys,[a(s(m),{onClick:L,size:"lg",class:"rounded-full w-20 h-20 bg-green-500 hover:bg-green-600 shadow-lg transition-all duration-200 hover:scale-105",disabled:!s(M)},{default:l(()=>[a(s(D),{class:"h-8 w-8"})]),_:1},8,["disabled"])])):(i(),n("div",ws,[a(s(m),{onClick:s(B),size:"lg",variant:"destructive",class:"rounded-full w-16 h-16 shadow-lg transition-all duration-200 hover:scale-105"},{default:l(()=>[a(s(ds),{class:"h-6 w-6"})]),_:1},8,["onClick"]),a(s(m),{onClick:s(T),variant:s(x)?"default":"outline",size:"lg",class:"rounded-full w-14 h-14 shadow-lg transition-all duration-200 hover:scale-105"},{default:l(()=>[s(x)?(i(),f(s(rs),{key:1,class:"h-5 w-5"})):(i(),f(s(E),{key:0,class:"h-5 w-5"}))]),_:1},8,["onClick","variant"])]))]),s($)?o("",!0):(i(),n("div",bs,[a(ss,{variant:"destructive",class:"max-w-md"},{default:l(()=>[a(s(es),{class:"h-4 w-4"}),a(ts,null,{default:l(()=>t[3]||(t[3]=[b(" 语音引擎不可用，请检查后端服务状态 ")])),_:1,__:[3]})]),_:1})])),y.value.length>0?(i(),n("div",ks,[t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-center text-gray-700 dark:text-gray-300"}," 最近对话 ",-1)),e("div",Cs,[(i(!0),n(Z,null,q(y.value,d=>(i(),n("div",{key:d.id,class:_(["flex gap-3",d.isUser?"justify-end":"justify-start"])},[e("div",Ss,[d.isUser?o("",!0):(i(),f(s(h),{key:0,class:"w-8 h-8 flex-shrink-0"},{default:l(()=>[a(s(S),{class:"bg-blue-600 text-white"},{default:l(()=>[a(s(C),{class:"h-4 w-4"})]),_:1})]),_:1})),a(s(w),{class:_(["transition-all duration-200 hover:shadow-md",d.isUser?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-800 dark:text-white"])},{default:l(()=>[a(s(k),{class:"p-3"},{default:l(()=>[e("p",Vs,g(d.content),1),e("p",js,g(s(os)(d.timestamp)),1)]),_:2},1024)]),_:2},1032,["class"]),d.isUser?(i(),f(s(h),{key:1,class:"w-8 h-8 flex-shrink-0"},{default:l(()=>[a(s(S),{class:"bg-blue-500 text-white"},{default:l(()=>[a(s(Q),{class:"h-4 w-4"})]),_:1})]),_:1})):o("",!0)])],2))),128))])])):o("",!0),s(r)==="idle"?(i(),f(s(w),{key:2,class:"bg-white/80 dark:bg-gray-800/80 backdrop-blur border-0 shadow-lg"},{default:l(()=>[a(s(k),{class:"p-6"},{default:l(()=>[e("div",Ms,[e("div",$s,[a(s(J),{class:"h-5 w-5 text-blue-500"}),t[5]||(t[5]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"}," 点击绿色按钮开始语音对话 ",-1))]),e("div",As,[t[7]||(t[7]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-2 h-2 rounded-full bg-green-500"}),e("span",null,"FunAudioLLM")],-1)),e("div",Ps,[t[6]||(t[6]=e("div",{class:"w-2 h-2 rounded-full bg-blue-500"},null,-1)),e("span",null,g(s(j))+" 轮对话",1)]),t[8]||(t[8]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-2 h-2 rounded-full bg-purple-500"}),e("span",null,"高性能识别")],-1))]),e("div",Bs,[e("div",Ts,[a(s(K),{class:"h-3 w-3 text-yellow-500"}),t[9]||(t[9]=e("span",null,"比Whisper快15倍",-1))]),e("div",Us,[a(s(as),{class:"h-3 w-3 text-red-500"}),t[10]||(t[10]=e("span",null,"情感识别",-1))]),e("div",Is,[a(s(ls),{class:"h-3 w-3 text-green-500"}),t[11]||(t[11]=e("span",null,"多语言支持",-1))]),e("div",Ls,[a(s(is),{class:"h-3 w-3 text-blue-500"}),t[12]||(t[12]=e("span",null,"隐私保护",-1))])])])]),_:1})]),_:1})):o("",!0)])])]))}});export{Ws as default};
//# sourceMappingURL=SimpleVoiceChatView-CzpMzDLG.js.map
