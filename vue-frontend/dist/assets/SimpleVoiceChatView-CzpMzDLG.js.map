{"version":3,"file":"SimpleVoiceChatView-CzpMzDLG.js","sources":["../../node_modules/.pnpm/lucide-vue-next@0.511.0_vue@3.5.14_typescript@5.8.3_/node_modules/lucide-vue-next/dist/esm/icons/phone-off.js","../../src/views/SimpleVoiceChatView.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.511.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PhoneOff = createLucideIcon(\"phone-off\", [\n  [\n    \"path\",\n    {\n      d: \"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272\",\n      key: \"1wngk7\"\n    }\n  ],\n  [\"path\", { d: \"M22 2 2 22\", key: \"y4kqgn\" }],\n  [\n    \"path\",\n    {\n      d: \"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473\",\n      key: \"10hv5p\"\n    }\n  ]\n]);\n\nexport { PhoneOff as default };\n//# sourceMappingURL=phone-off.js.map\n","<template>\n  <div class=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n    <div class=\"container mx-auto p-4 max-w-2xl\">\n      <div class=\"space-y-6\">\n        <!-- AI头像区域 -->\n        <div class=\"flex justify-center pt-8\">\n          <div class=\"relative\">\n            <Avatar class=\"w-32 h-32\">\n              <div \n                :class=\"[\n                  'w-full h-full rounded-full flex items-center justify-center transition-all duration-300',\n                  isAIPlaying ? 'bg-blue-500 animate-pulse' : 'bg-blue-600'\n                ]\"\n              >\n                <Bot class=\"h-16 w-16 text-white\" />\n              </div>\n            </Avatar>\n            \n            <!-- 说话动画 -->\n            <div \n              v-if=\"isAIPlaying\" \n              class=\"absolute inset-0 rounded-full border-4 border-blue-300 animate-ping\"\n            />\n            \n            <!-- 录音指示器 -->\n            <div \n              v-if=\"callState === 'listening'\" \n              class=\"absolute -bottom-2 -right-2\"\n            >\n              <div class=\"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center animate-pulse\">\n                <div class=\"w-2 h-2 bg-white rounded-full\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 状态文本和进度 -->\n        <div class=\"text-center space-y-3\">\n          <h2 class=\"text-2xl font-bold text-gray-800 dark:text-white mb-2\">\n            AI 语音助手\n          </h2>\n          <Badge \n            :variant=\"getStatusVariant()\" \n            class=\"text-sm px-3 py-1\"\n          >\n            {{ getStatusText() }}\n          </Badge>\n          \n          <!-- 语音识别进度条 -->\n          <div v-if=\"callState === 'processing'\" class=\"w-full max-w-xs mx-auto\">\n            <Progress :value=\"processingProgress\" class=\"h-2\" />\n            <p class=\"text-xs text-gray-500 mt-1\">正在处理语音...</p>\n          </div>\n        </div>\n\n        <!-- 通话控制 -->\n        <div class=\"flex justify-center\">\n          <div v-if=\"callState === 'idle'\">\n            <Button\n              @click=\"handleStartCall\"\n              size=\"lg\"\n              class=\"rounded-full w-20 h-20 bg-green-500 hover:bg-green-600 shadow-lg transition-all duration-200 hover:scale-105\"\n              :disabled=\"!canStartCall\"\n            >\n              <Phone class=\"h-8 w-8\" />\n            </Button>\n          </div>\n          <div v-else class=\"flex items-center gap-6\">\n            <!-- 结束通话 -->\n            <Button\n              @click=\"endCall\"\n              size=\"lg\"\n              variant=\"destructive\"\n              class=\"rounded-full w-16 h-16 shadow-lg transition-all duration-200 hover:scale-105\"\n            >\n              <PhoneOff class=\"h-6 w-6\" />\n            </Button>\n\n            <!-- 静音 -->\n            <Button\n              @click=\"toggleMute\"\n              :variant=\"isMuted ? 'default' : 'outline'\"\n              size=\"lg\"\n              class=\"rounded-full w-14 h-14 shadow-lg transition-all duration-200 hover:scale-105\"\n            >\n              <Volume2 v-if=\"!isMuted\" class=\"h-5 w-5\" />\n              <VolumeX v-else class=\"h-5 w-5\" />\n            </Button>\n          </div>\n        </div>\n\n        <!-- 语音引擎状态提示 -->\n        <div v-if=\"!funAudioAvailable\" class=\"flex justify-center\">\n          <Alert variant=\"destructive\" class=\"max-w-md\">\n            <AlertTriangle class=\"h-4 w-4\" />\n            <AlertDescription>\n              语音引擎不可用，请检查后端服务状态\n            </AlertDescription>\n          </Alert>\n        </div>\n\n        <!-- 最近对话 -->\n        <div v-if=\"recentMessages.length > 0\" class=\"space-y-3\">\n          <h3 class=\"text-lg font-semibold text-center text-gray-700 dark:text-gray-300\">\n            最近对话\n          </h3>\n          <div class=\"space-y-3 max-h-64 overflow-y-auto\">\n            <div\n              v-for=\"message in recentMessages\"\n              :key=\"message.id\"\n              :class=\"[\n                'flex gap-3',\n                message.isUser ? 'justify-end' : 'justify-start'\n              ]\"\n            >\n              <div class=\"flex items-start gap-2 max-w-[80%]\">\n                <!-- 头像 -->\n                <Avatar \n                  v-if=\"!message.isUser\" \n                  class=\"w-8 h-8 flex-shrink-0\"\n                >\n                  <AvatarFallback class=\"bg-blue-600 text-white\">\n                    <Bot class=\"h-4 w-4\" />\n                  </AvatarFallback>\n                </Avatar>\n                \n                <!-- 消息内容 -->\n                <Card\n                  :class=\"[\n                    'transition-all duration-200 hover:shadow-md',\n                    message.isUser \n                      ? 'bg-blue-500 text-white border-blue-500' \n                      : 'bg-white dark:bg-gray-700 text-gray-800 dark:text-white'\n                  ]\"\n                >\n                  <CardContent class=\"p-3\">\n                    <p class=\"text-sm\">{{ message.content }}</p>\n                    <p class=\"text-xs opacity-70 mt-1\">\n                      {{ formatTime(message.timestamp) }}\n                    </p>\n                  </CardContent>\n                </Card>\n                \n                <!-- 用户头像 -->\n                <Avatar \n                  v-if=\"message.isUser\" \n                  class=\"w-8 h-8 flex-shrink-0\"\n                >\n                  <AvatarFallback class=\"bg-blue-500 text-white\">\n                    <User class=\"h-4 w-4\" />\n                  </AvatarFallback>\n                </Avatar>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 使用提示 -->\n        <Card v-if=\"callState === 'idle'\" class=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur border-0 shadow-lg\">\n          <CardContent class=\"p-6\">\n            <div class=\"text-center space-y-4\">\n              <div class=\"flex items-center justify-center gap-2 mb-3\">\n                <Mic class=\"h-5 w-5 text-blue-500\" />\n                <span class=\"font-medium text-gray-700 dark:text-gray-300\">\n                  点击绿色按钮开始语音对话\n                </span>\n              </div>\n              \n              <div class=\"flex items-center justify-center gap-6 text-xs text-gray-500\">\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                  <span>FunAudioLLM</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n                  <span>{{ conversationRounds }} 轮对话</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 rounded-full bg-purple-500\"></div>\n                  <span>高性能识别</span>\n                </div>\n              </div>\n              \n              <!-- 功能特性 -->\n              <div class=\"grid grid-cols-2 gap-3 mt-4 text-xs text-gray-600 dark:text-gray-400\">\n                <div class=\"flex items-center gap-2\">\n                  <Zap class=\"h-3 w-3 text-yellow-500\" />\n                  <span>比Whisper快15倍</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                  <Heart class=\"h-3 w-3 text-red-500\" />\n                  <span>情感识别</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                  <Globe class=\"h-3 w-3 text-green-500\" />\n                  <span>多语言支持</span>\n                </div>\n                <div class=\"flex items-center gap-2\">\n                  <Shield class=\"h-3 w-3 text-blue-500\" />\n                  <span>隐私保护</span>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { storeToRefs } from 'pinia'\nimport {\n  Bot,\n  Phone,\n  PhoneOff,\n  Volume2,\n  VolumeX,\n  User,\n  Mic,\n  AlertTriangle,\n  Zap,\n  Heart,\n  Globe,\n  Shield\n} from 'lucide-vue-next'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport Progress from '@/components/ui/Progress.vue'\nimport Alert from '@/components/ui/Alert.vue'\nimport AlertDescription from '@/components/ui/AlertDescription.vue'\nimport { useVoiceStore } from '@/stores/voice'\nimport { formatTime } from '@/utils'\n\nconst voiceStore = useVoiceStore()\nconst {\n  messages,\n  callState,\n  isAIPlaying,\n  isMuted,\n  conversationRounds,\n  canStartCall,\n  funAudioAvailable\n} = storeToRefs(voiceStore)\n\nconst {\n  checkServiceStatus,\n  startCall,\n  endCall,\n  toggleMute,\n  getStatusText\n} = voiceStore\n\n// 处理进度\nconst processingProgress = ref(0)\n\n// 最近的6条消息\nconst recentMessages = computed(() => {\n  return messages.value.slice(-6)\n})\n\n// 获取状态变体\nfunction getStatusVariant() {\n  switch (callState.value) {\n    case 'idle':\n      return 'secondary'\n    case 'connecting':\n      return 'default'\n    case 'connected':\n      return 'default'\n    case 'listening':\n      return 'default'\n    case 'speaking':\n      return 'default'\n    case 'processing':\n      return 'default'\n    default:\n      return 'secondary'\n  }\n}\n\n// 处理开始通话\nasync function handleStartCall() {\n  try {\n    await startCall()\n  } catch (error: any) {\n    alert(error.message)\n  }\n}\n\n// 模拟处理进度\nfunction simulateProcessingProgress() {\n  if (callState.value === 'processing') {\n    processingProgress.value = 0\n    const interval = setInterval(() => {\n      processingProgress.value += 10\n      if (processingProgress.value >= 100 || callState.value !== 'processing') {\n        clearInterval(interval)\n        processingProgress.value = 0\n      }\n    }, 100)\n  }\n}\n\n// 监听状态变化\nwatch(callState, (newState: string) => {\n  if (newState === 'processing') {\n    simulateProcessingProgress()\n  }\n})\n\nonMounted(() => {\n  checkServiceStatus()\n})\n</script> "],"names":["PhoneOff","createLucideIcon","voiceStore","useVoiceStore","messages","callState","isAIPlaying","isMuted","conversationRounds","canStartCall","funAudioAvailable","storeToRefs","checkServiceStatus","startCall","endCall","toggleMute","getStatusText","processingProgress","ref","recentMessages","computed","getStatusVariant","handleStartCall","error","simulateProcessingProgress","interval","watch","newState","onMounted"],"mappings":"2kBAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAWC,EAAiB,YAAa,CAC7C,CACE,OACA,CACE,EAAG,6IACH,IAAK,QACX,CACG,EACD,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CACE,OACA,CACE,EAAG,oIACH,IAAK,QACX,CACA,CACA,CAAC,otCCoND,MAAMC,EAAaC,GAAc,EAC3B,CACJ,SAAAC,EACA,UAAAC,EACA,YAAAC,EACA,QAAAC,EACA,mBAAAC,EACA,aAAAC,EACA,kBAAAC,CAAA,EACEC,EAAYT,CAAU,EAEpB,CACJ,mBAAAU,EACA,UAAAC,EACA,QAAAC,EACA,WAAAC,EACA,cAAAC,CAAA,EACEd,EAGEe,EAAqBC,EAAI,CAAC,EAG1BC,EAAiBC,EAAS,IACvBhB,EAAS,MAAM,MAAM,EAAE,CAC/B,EAGD,SAASiB,GAAmB,CAC1B,OAAQhB,EAAU,MAAO,CACvB,IAAK,OACI,MAAA,YACT,IAAK,aACI,MAAA,UACT,IAAK,YACI,MAAA,UACT,IAAK,YACI,MAAA,UACT,IAAK,WACI,MAAA,UACT,IAAK,aACI,MAAA,UACT,QACS,MAAA,WAAA,CACX,CAIF,eAAeiB,GAAkB,CAC3B,GAAA,CACF,MAAMT,EAAU,QACTU,EAAY,CACnB,MAAMA,EAAM,OAAO,CAAA,CACrB,CAIF,SAASC,GAA6B,CAChC,GAAAnB,EAAU,QAAU,aAAc,CACpCY,EAAmB,MAAQ,EACrB,MAAAQ,EAAW,YAAY,IAAM,CACjCR,EAAmB,OAAS,IACxBA,EAAmB,OAAS,KAAOZ,EAAU,QAAU,gBACzD,cAAcoB,CAAQ,EACtBR,EAAmB,MAAQ,IAE5B,GAAG,CAAA,CACR,CAII,OAAAS,EAAArB,EAAYsB,GAAqB,CACjCA,IAAa,cACYH,EAAA,CAC7B,CACD,EAEDI,EAAU,IAAM,CACKhB,EAAA,CAAA,CACpB","x_google_ignoreList":[0]}