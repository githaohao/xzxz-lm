import{c as p,d as Z,L as W,l as X,s as i,v as s,p as a,k as o,b as c,e as l,u as e,M as h,T as y,U as k,x as n,V as L,O as x,_ as m,N as f,W as w,X as z,Y as D,F as E,P as O,Z as Y,j as r,G as v}from"./index-CSZ9edpw.js";import{_ as g,f as J,g as K,U as Q,B as ee}from"./index-8hsMokCs.js";import{_ as se,T as te,a as ae,H as le,G as re,S as ie}from"./AlertDescription.vue_vue_type_script_setup_true_lang-CXEuvUxf.js";import{u as ne,V as de}from"./voice-BtWHYMRq.js";import{a as oe}from"./index-hijg72sg.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=p("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=p("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=p("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=p("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=p("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=p("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),he={class:"container mx-auto p-4 max-w-4xl"},xe={class:"space-y-6"},me={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ve={class:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg border"},_e={class:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg border"},ye={class:"flex items-center gap-2"},ke={class:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg border"},we={class:"flex items-center gap-2"},be={key:0,class:"flex justify-center"},Me={class:"flex justify-center"},Ce={class:"flex items-center gap-6"},Se={key:0},Ve={class:"relative"},je={key:1,class:"flex items-center gap-6"},Le={class:"flex justify-center mt-6"},ze={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},Ae={key:0,class:"flex items-center gap-2"},$e={key:1,class:"flex items-center gap-2"},Te={key:2,class:"flex items-center gap-2"},Ue={key:1,class:"flex justify-center gap-3"},Be={key:2},Fe={class:"space-y-4 max-h-96 overflow-y-auto pr-2"},Ie={class:"flex flex-col gap-2"},Ne={class:"whitespace-pre-wrap break-words text-sm leading-relaxed"},qe={class:"text-xs text-gray-500 dark:text-gray-400 px-1"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={class:"space-y-3"},Re={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400"},Ge={class:"flex items-center gap-2"},Ze={class:"flex items-center gap-2"},We={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},De={class:"space-y-3"},Ee={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400"},Oe={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},Je={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},is=Z({__name:"VoiceChatView",setup(Qe){const b=ne(),{messages:M,callState:u,isRecording:es,isAIPlaying:C,isMuted:S,conversationRounds:$,funAudioAvailable:_,hasMessages:V,canStartCall:T}=W(b),{checkServiceStatus:U,startCall:B,endCall:F,toggleMute:I,interruptAI:N,clearHistory:q,restartSession:H,getStatusText:P}=b;async function R(){try{await B()}catch(j){alert(j.message)}}function G(){switch(u.value){case"idle":return"secondary";case"connecting":return"default";case"connected":return"default";case"listening":return"default";case"speaking":return"default";case"processing":return"default";default:return"secondary"}}return X(()=>{U()}),(j,t)=>(r(),i("div",he,[s("div",xe,[t[23]||(t[23]=s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"}," 语音聊天控制台 "),s("p",{class:"text-gray-600 dark:text-gray-400"}," 基于 FunAudioLLM 的高性能语音对话系统 ")],-1)),a(e(h),{class:"border-0 shadow-lg"},{default:l(()=>[a(e(y),null,{default:l(()=>[a(e(k),{class:"flex items-center gap-2"},{default:l(()=>[a(e(L),{class:"h-6 w-6 text-blue-500"}),t[0]||(t[0]=n(" 系统状态 "))]),_:1,__:[0]})]),_:1}),a(e(x),null,{default:l(()=>[s("div",me,[s("div",ve,[t[1]||(t[1]=s("div",{class:"flex items-center gap-2"},[s("div",{class:"w-3 h-3 rounded-full bg-blue-500"}),s("span",{class:"font-medium"},"通话状态")],-1)),a(e(m),{variant:G(),class:"font-medium"},{default:l(()=>[n(f(e(P)()),1)]),_:1},8,["variant"])]),s("div",_e,[s("div",ye,[a(e(ce),{class:"h-4 w-4 text-green-500"}),t[2]||(t[2]=s("span",{class:"font-medium"},"对话轮数",-1))]),a(e(m),{variant:"outline",class:"font-medium"},{default:l(()=>[n(f(e($)),1)]),_:1})]),s("div",ke,[s("div",we,[a(e(ue),{class:"h-4 w-4 text-purple-500"}),t[3]||(t[3]=s("span",{class:"font-medium"},"语音引擎",-1))]),a(e(m),{variant:e(_)?"default":"destructive",class:"font-medium"},{default:l(()=>[n(f(e(_)?"FunAudioLLM":"不可用"),1)]),_:1},8,["variant"])])])]),_:1})]),_:1}),e(_)?o("",!0):(r(),i("div",be,[a(se,{variant:"destructive",class:"max-w-2xl"},{default:l(()=>[a(e(te),{class:"h-4 w-4"}),a(ae,{class:"ml-2"},{default:l(()=>t[4]||(t[4]=[s("strong",null,"语音引擎不可用",-1),n(" - 请检查后端服务状态，确保 FunAudioLLM 服务正常运行 ")])),_:1,__:[4]})]),_:1})])),a(e(h),{class:"border-0 shadow-lg"},{default:l(()=>[a(e(x),{class:"p-8"},{default:l(()=>[s("div",Me,[s("div",Ce,[e(u)==="idle"?(r(),i("div",Se,[s("div",Ve,[a(e(g),{onClick:R,size:"lg",class:"rounded-full w-20 h-20 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-xl transition-all duration-300 hover:scale-110",disabled:!e(T)},{default:l(()=>[a(e(w),{class:"h-8 w-8"})]),_:1},8,["disabled"]),t[5]||(t[5]=s("div",{class:"absolute -inset-2 bg-green-400 rounded-full opacity-20 animate-ping"},null,-1))])])):(r(),i("div",je,[a(e(g),{onClick:e(F),size:"lg",variant:"destructive",class:"rounded-full w-16 h-16 shadow-lg transition-all duration-200 hover:scale-105"},{default:l(()=>[a(e(w),{class:"h-8 w-8 text-white"})]),_:1},8,["onClick"]),a(e(g),{onClick:e(I),variant:e(S)?"default":"outline",size:"lg",class:"rounded-full w-14 h-14 shadow-lg transition-all duration-200 hover:scale-105"},{default:l(()=>[e(S)?(r(),c(e(de),{key:1,class:"h-5 w-5"})):(r(),c(e(z),{key:0,class:"h-5 w-5"}))]),_:1},8,["onClick","variant"]),e(C)?(r(),c(e(g),{key:0,onClick:e(N),variant:"outline",size:"lg",class:"rounded-full w-14 h-14 shadow-lg transition-all duration-200 hover:scale-105"},{default:l(()=>[a(e(A),{class:"h-5 w-5"})]),_:1},8,["onClick"])):o("",!0)]))])]),s("div",Le,[s("div",ze,[e(u)==="listening"?(r(),i("div",Ae,t[6]||(t[6]=[s("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1),s("span",null,"正在录音",-1)]))):o("",!0),e(C)?(r(),i("div",$e,t[7]||(t[7]=[s("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"},null,-1),s("span",null,"AI 正在回复",-1)]))):o("",!0),e(u)==="processing"?(r(),i("div",Te,t[8]||(t[8]=[s("div",{class:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"},null,-1),s("span",null,"正在处理",-1)]))):o("",!0)])])]),_:1})]),_:1}),e(u)==="idle"?(r(),i("div",Ue,[a(e(g),{onClick:e(q),variant:"outline",size:"sm",disabled:!e(V),class:"transition-all duration-200 hover:scale-105"},{default:l(()=>[a(e(pe),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=n(" 清除历史 "))]),_:1,__:[9]},8,["onClick","disabled"]),a(e(g),{onClick:e(H),variant:"outline",size:"sm",class:"transition-all duration-200 hover:scale-105"},{default:l(()=>[a(e(fe),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=n(" 新会话 "))]),_:1,__:[10]},8,["onClick"])])):o("",!0),e(V)?(r(),i("div",Be,[a(e(h),{class:"border-0 shadow-lg"},{default:l(()=>[a(e(y),null,{default:l(()=>[a(e(k),{class:"flex items-center gap-2"},{default:l(()=>[a(e(D),{class:"h-5 w-5 text-blue-500"}),t[11]||(t[11]=n(" 对话记录 ")),a(e(m),{variant:"secondary",class:"ml-auto"},{default:l(()=>[n(f(e(M).length)+" 条消息",1)]),_:1})]),_:1,__:[11]})]),_:1}),a(e(x),null,{default:l(()=>[s("div",Fe,[(r(!0),i(E,null,O(e(M),d=>(r(),i("div",{key:d.id,class:v(["flex gap-3 transition-all duration-200 hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-lg p-2",d.isUser?"justify-end":"justify-start"])},[s("div",{class:v(["flex gap-3 max-w-[80%]",d.isUser?"flex-row-reverse":"flex-row"])},[a(e(J),{class:"w-10 h-10 flex-shrink-0"},{default:l(()=>[a(e(K),{class:v(d.isUser?"bg-blue-500 text-white":"bg-gray-600 text-white")},{default:l(()=>[d.isUser?(r(),c(e(Q),{key:0,class:"h-5 w-5"})):(r(),c(e(ee),{key:1,class:"h-5 w-5"}))]),_:2},1032,["class"])]),_:2},1024),s("div",Ie,[a(e(h),{class:v(["transition-all duration-200 hover:shadow-md",d.isUser?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600"])},{default:l(()=>[a(e(x),{class:"p-4"},{default:l(()=>[s("div",Ne,f(d.content),1)]),_:2},1024)]),_:2},1032,["class"]),s("div",qe,f(e(oe)(d.timestamp)),1)])],2)],2))),128))])]),_:1})]),_:1})])):o("",!0),e(u)==="idle"?(r(),c(e(h),{key:3,class:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20"},{default:l(()=>[a(e(y),null,{default:l(()=>[a(e(k),{class:"flex items-center gap-2"},{default:l(()=>[a(e(ge),{class:"h-5 w-5 text-blue-500"}),t[12]||(t[12]=n(" 使用说明 "))]),_:1,__:[12]})]),_:1}),a(e(x),null,{default:l(()=>[s("div",He,[s("div",Pe,[t[17]||(t[17]=s("h4",{class:"font-medium text-gray-900 dark:text-white"},"基本操作",-1)),s("div",Re,[s("div",Ge,[a(e(w),{class:"h-4 w-4 text-green-500"}),t[13]||(t[13]=s("span",null,"点击绿色电话按钮开始语音通话",-1))]),s("div",Ze,[a(e(L),{class:"h-4 w-4 text-blue-500"}),t[14]||(t[14]=s("span",null,"系统会自动录音并识别您的语音",-1))]),s("div",We,[a(e(A),{class:"h-4 w-4 text-orange-500"}),t[15]||(t[15]=s("span",null,"AI回复时可以点击暂停按钮中断",-1))]),s("div",Xe,[a(e(z),{class:"h-4 w-4 text-purple-500"}),t[16]||(t[16]=s("span",null,"支持静音控制和会话管理",-1))])])]),s("div",De,[t[22]||(t[22]=s("h4",{class:"font-medium text-gray-900 dark:text-white"},"技术特性",-1)),s("div",Ee,[s("div",Oe,[a(e(Y),{class:"h-4 w-4 text-yellow-500"}),t[18]||(t[18]=s("span",null,"基于FunAudioLLM引擎，识别速度比Whisper快15倍",-1))]),s("div",Ye,[a(e(le),{class:"h-4 w-4 text-red-500"}),t[19]||(t[19]=s("span",null,"支持情感识别和声学事件检测",-1))]),s("div",Je,[a(e(re),{class:"h-4 w-4 text-green-500"}),t[20]||(t[20]=s("span",null,"支持50+种语言的语音识别",-1))]),s("div",Ke,[a(e(ie),{class:"h-4 w-4 text-blue-500"}),t[21]||(t[21]=s("span",null,"本地处理，保护用户隐私",-1))])])])])]),_:1})]),_:1})):o("",!0)])]))}});export{is as default};
//# sourceMappingURL=VoiceChatView-CZHdjg22.js.map
